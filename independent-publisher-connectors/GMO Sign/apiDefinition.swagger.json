{
  "swagger": "2.0",
  "info": {
    "x-ms-deployment-version": "1.0.0",
    "version": "1.0",
    "title": "GMO Sign",
    "description": "GMO Sign Connector helps organizations connect and automate how they prepare, sign, act on, and manage agreements.",
    "x-ms-api-annotation": {
      "status": "Production"
    },
    "contact": {
      "name": "GMO Global Sign",
      "url": "https://www.gmosign.com/"
    }
  },
  "x-ms-connector-metadata": [
    {
      "propertyName": "Website",
      "propertyValue": "https://secure.gmosign.com/"
    },
    {
      "propertyName": "Privacy policy",
      "propertyValue": "https://www.gmogshd.com/privacy"
    },
    {
      "propertyName": "Categories",
      "propertyValue": "Content and Files;Productivity"
    }
  ],
  "host": "y4omo61inf.execute-api.ap-northeast-1.amazonaws.com",
  "basePath": "/prd",
  "schemes": [
    "https"
  ],
  "securityDefinitions": {
    "basicAuth": {
      "type": "basic"
    }
  },
  "security": [
    {
      "basicAuth": []
    }
  ],
  "paths": {
    "/customer/connect": {
      "x-ms-notification-content": {
        "description": "Details for Webhook",
        "schema": {
          "$ref": "#/definitions/WebhookEnvelopeResponse"
        }
      },
      "post": {
        "summary": "When an envelope status changes (Connect)",
        "description": "Triggers a new flow when an envelope status changes.",
        "operationId": "CreateHookEnvelope",
        "consumes": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": [
                "name",
                "urlToPublishTo",
                "envelopeEvents"
              ],
              "properties": {
                "name": {
                  "type": "string",
                  "x-ms-summary": "接続名",
                  "x-ms-visibility": "important"
                },
                "urlToPublishTo": {
                  "type": "string",
                  "x-ms-summary": "Webhook用URL",
                  "x-ms-visibility": "internal",
                  "x-ms-notification-url": true
                },
                "envelopeEvents": {
                  "type": "string",
                  "x-ms-summary": "トリガーを引く封筒状態",
                  "x-ms-visibility": "internal",
                  "default": "Completed"
                }
              }
            }
          }
        ],
        "responses": {
          "201": {
            "description": "default",
            "schema": {
              "type": "object",
              "properties": {
                "cus_id": {
                  "type": "string",
                  "x-ms-summary": "顧客ID"
                },
                "connect_id": {
                  "type": "string",
                  "x-ms-summary": "接続ID"
                },
                "envelopeEvents": {
                  "type": "string",
                  "x-ms-summary": "トリガーを引く封筒状態"
                },
                "urlToPublishTo": {
                  "type": "string",
                  "x-ms-summary": "Webhook用URL"
                },
                "created_at": {
                  "type": "string",
                  "x-ms-summary": "作成日時"
                },
                "updated_at": {
                  "type": "string",
                  "x-ms-summary": "更新日時"
                }
              }
            }
          }
        },
        "deprecated": false,
        "x-ms-trigger": "single",
        "x-ms-trigger-hint": "To see it work now, send an envelope.",
        "x-ms-visibility": "important",
        "x-ms-no-generic-test": true
      }
    },
    "/customer/connect/{connectId}": {
      "delete": {
        "summary": "Delete hook",
        "description": "Delete a hook.",
        "operationId": "DeleteHook",
        "parameters": [
          {
            "name": "connectId",
            "in": "path",
            "required": true,
            "type": "string",
            "x-ms-summary": "接続ID",
            "x-ms-url-encoding": "single"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "type": "object",
              "properties": {
                "cus_id": {
                  "type": "string",
                  "x-ms-summary": "顧客ID"
                },
                "connect_id": {
                  "type": "string",
                  "x-ms-summary": "接続ID"
                },
                "connectionName": {
                  "type": "string",
                  "x-ms-summary": "接続名"
                },
                "envelopeEvents": {
                  "type": "string",
                  "x-ms-summary": "トリガーを引く封筒状態"
                },
                "urlToPublishTo": {
                  "type": "string",
                  "x-ms-summary": "Webhook用URL"
                },
                "created_at": {
                  "type": "string",
                  "x-ms-summary": "作成日時"
                },
                "updated_at": {
                  "type": "string",
                  "x-ms-summary": "更新日時"
                }
              }
            }
          }
        },
        "deprecated": false,
        "x-ms-visibility": "internal",
        "x-ms-no-generic-test": true
      }
    },
    "/customer/documents/{documentId}": {
      "get": {
        "summary": "Get envelope documents",
        "description": "Get envelope documents.",
        "operationId": "GetDocuments",
        "parameters": [
          {
            "name": "documentId",
            "in": "path",
            "required": true,
            "description": "Document id",
            "x-ms-summary": "文書ID",
            "x-ms-visibility": "important",
            "type": "string",
            "x-ms-url-encoding": "single"
          },
          {
            "name": "download_type",
            "in": "query",
            "required": true,
            "x-ms-summary": "文書ダウンロード形式",
            "x-ms-visibility": "internal",
            "default": 2,
            "type": "integer",
            "format": "int32"
          },
          {
            "name": "operation",
            "in": "query",
            "required": true,
            "x-ms-summary": "操作",
            "x-ms-visibility": "internal",
            "default": 1,
            "type": "integer",
            "format": "int32"
          }
        ],
        "responses": {
          "200": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/GetDocumentsResponse"
            }
          }
        },
        "deprecated": false,
        "x-ms-visibility": "advanced"
      }
    },
    "/customer/envelopes/templates/{templateId}/transaction": {
      "post": {
        "tags": [
          "GMOGlobalSign"
        ],
        "summary": "Send a new envelope using a specified template",
        "description": "Send a new envelope using a specified template.",
        "operationId": "SendEnvelope",
        "x-ms-no-generic-test": true,
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "templateId",
            "in": "path",
            "description": "Template id",
            "required": true,
            "x-ms-summary": "テンプレートID",
            "type": "string",
            "x-ms-url-encoding": "single"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/TemplateSignRequest"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "OK",
            "schema": {
              "$ref": "#/definitions/SendEnvelopeResponse"
            }
          }
        },
        "deprecated": false,
        "x-ms-visibility": "important"
      }
    }
  },
  "definitions": {
    "EnvelopeTemplatesResponse": {
      "type": "object",
      "properties": {
        "envelopeTemplates": {
          "description": "envelope templates",
          "type": "array",
          "items": {
            "$ref": "#/definitions/EnvelopeTemplate"
          },
          "x-ms-summary": "封筒テンプレート一覧",
          "x-ms-visibility": "advanced"
        }
      }
    },
    "EnvelopeTemplate": {
      "required": [
        "envelope_template_id"
      ],
      "type": "object",
      "properties": {
        "envelope_template_id": {
          "x-ms-summary": "テンプレートID",
          "type": "string"
        }
      }
    },
    "WebhookRequest": {
      "type": "object",
      "required": [
        "name",
        "urlToPublishTo",
        "envelopeEvents"
      ],
      "properties": {
        "name": {
          "type": "string",
          "x-ms-summary": "接続名",
          "x-ms-visibility": "important"
        },
        "urlToPublishTo": {
          "type": "string",
          "x-ms-summary": "Webhook用URL",
          "x-ms-visibility": "internal",
          "x-ms-notification-url": true
        },
        "envelopeEvents": {
          "type": "string",
          "x-ms-summary": "トリガーを引く封筒状態",
          "x-ms-visibility": "internal",
          "default": "Completed"
        }
      }
    },
    "WebhookEnvelopeResponse": {
      "type": "object",
      "properties": {
        "document_list": {
          "type": "array",
          "x-ms-summary": "文書一覧",
          "items": {
            "type": "object",
            "properties": {
              "documentId": {
                "type": "string",
                "x-ms-summary": "文書ID"
              },
              "document_name": {
                "type": "string",
                "x-ms-summary": "文署名"
              }
            }
          }
        },
        "envelope_name": {
          "type": "string",
          "x-ms-summary": "封筒名"
        },
        "envelope_xid": {
          "type": "string",
          "x-ms-summary": "封筒トランザクションID"
        }
      }
    },
    "GetDocumentsResponse": {
      "type": "object",
      "properties": {
        "downloadedDocument": {
          "type": "string",
          "format": "byte",
          "x-ms-summary": "ダウンロードした文書のPDF",
          "x-ms-visibility": "important"
        }
      }
    },
    "TemplateSignRequest": {
      "type": "object",
      "required": [
        "envelope_name",
        "signer_list",
        "is_web_hook"
      ],
      "properties": {
        "envelope_name": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "封筒名"
        },
        "sender_name": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "送信担当者名"
        },
        "sender_post_name": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "送信担当者所属名"
        },
        "is_compliation_mail": {
          "type": "integer",
          "format": "int32",
          "x-ms-visibility": "important",
          "x-ms-summary": "署名完了通知メール",
          "default": 2,
          "description": "設定者に完了通知メールを送信するか",
          "enum": [
            1,
            2
          ],
          "x-ms-enum-values": [
            {
              "displayName": "送信する",
              "value": 1
            },
            {
              "displayName": "送信しない",
              "value": 2
            }
          ]
        },
        "is_web_hook": {
          "type": "integer",
          "format": "int32",
          "x-ms-visibility": "important",
          "x-ms-summary": "トリガー起動",
          "description": "署名完了時にPowerAutomateのトリガーを起動するか",
          "default": 1,
          "enum": [
            1,
            2
          ],
          "x-ms-enum-values": [
            {
              "displayName": "起動する",
              "value": 1
            },
            {
              "displayName": "起動しない",
              "value": 2
            }
          ]
        },
        "bounced_note_mail": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "メール送信時エラー通知先"
        },
        "approver_list": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/approver"
          },
          "x-ms-visibility": "advanced",
          "x-ms-summary": "承認者"
        },
        "work_flow_comment": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "承認申請コメント"
        },
        "signer_list": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/reqSigner"
          },
          "x-ms-visibility": "important",
          "x-ms-summary": "署名者"
        },
        "not_signer_list": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/not_signer"
          },
          "x-ms-visibility": "advanced",
          "x-ms-summary": "受領者"
        },
        "inset_item_list": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/inset_item"
          },
          "x-ms-visibility": "advanced",
          "x-ms-summary": "差込項目"
        }
      }
    },
    "approver": {
      "type": "object",
      "properties": {
        "order_no": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "承認順"
        },
        "name": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "担当者名"
        },
        "post_name": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "所属先"
        },
        "email": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "Eメール"
        }
      }
    },
    "reqSigner": {
      "required": [
        "signer_type",
        "sign_type"
      ],
      "type": "object",
      "properties": {
        "signer_type": {
          "type": "integer",
          "format": "int32",
          "x-ms-visibility": "important",
          "x-ms-summary": "署名者タイプ",
          "enum": [
            1,
            2
          ],
          "x-ms-enum-values": [
            {
              "displayName": "自社署名者",
              "value": 1
            },
            {
              "displayName": "送信先署名者",
              "value": 2
            }
          ]
        },
        "use_template": {
          "type": "integer",
          "format": "int32",
          "x-ms-visibility": "important",
          "x-ms-summary": "テンプレート利用",
          "description": "テンプレートに登録された署名者を利用するか",
          "enum": [
            1,
            2
          ],
          "x-ms-enum-values": [
            {
              "displayName": "利用する",
              "value": 1
            },
            {
              "displayName": "利用しない",
              "value": 2
            }
          ]
        },
        "order_no": {
          "type": "string",
          "x-ms-summary": "署名順"
        },
        "sign_type": {
          "type": "integer",
          "format": "int32",
          "x-ms-visibility": "important",
          "x-ms-summary": "署名方法",
          "enum": [
            0,
            1
          ],
          "x-ms-enum-values": [
            {
              "displayName": "実印タイプ（当事者型）",
              "value": 0
            },
            {
              "displayName": "契約印タイプ（立会人型）",
              "value": 1
            }
          ]
        },
        "name": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "担当者名"
        },
        "organize_name": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "所属先"
        },
        "email": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "Eメール"
        },
        "comment": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "コメント"
        },
        "access_code": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "アクセスコード"
        },
        "is_signer_change": {
          "type": "integer",
          "format": "int32",
          "x-ms-visibility": "important",
          "x-ms-summary": "変更許可",
          "default": 2,
          "description": "署名者に署名者変更を許可するか  署名方法が契約印タイプのみ指定可能",
          "enum": [
            1,
            2
          ],
          "x-ms-enum-values": [
            {
              "displayName": "許可する",
              "value": 1
            },
            {
              "displayName": "許可しない",
              "value": 2
            }
          ]
        },
        "is_attached_file": {
          "type": "integer",
          "format": "int32",
          "x-ms-visibility": "important",
          "x-ms-summary": "画像添付",
          "description": "署名者に画像添付を求めるか",
          "enum": [
            1,
            2
          ],
          "x-ms-enum-values": [
            {
              "displayName": "画像添付あり",
              "value": 1
            },
            {
              "displayName": "画像添付なし",
              "value": 2
            }
          ]
        },
        "is_send_mail": {
          "type": "integer",
          "format": "int32",
          "x-ms-visibility": "important",
          "x-ms-summary": "メール送信",
          "description": "署名者へ署名依頼メールを送信するか",
          "default": 2,
          "enum": [
            1,
            2
          ],
          "x-ms-enum-values": [
            {
              "displayName": "送信する",
              "value": 1
            },
            {
              "displayName": "送信しない",
              "value": 2
            }
          ]
        },
        "language": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "メール言語",
          "enum": [
            "ja",
            "en"
          ],
          "x-ms-enum-values": [
            {
              "displayName": "日本語",
              "value": "ja"
            },
            {
              "displayName": "英語",
              "value": "en"
            }
          ]
        },
        "payment_type": {
          "type": "integer",
          "format": "int32",
          "x-ms-summary": "決済種別",
          "default": 0,
          "description": "決済種別を指定",
          "enum": [
            0,
            1,
            2
          ],
          "x-ms-enum-values": [
            {
              "displayName": "設定なし",
              "value": 0
            },
            {
              "displayName": "都度決済",
              "value": 1
            },
            {
              "displayName": "定期決済",
              "value": 2
            }
          ]
        },
        "amount": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "決済金額(円)"
        },
        "description": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "摘要"
        },
        "subscription_start_year": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "定期決済開始年"
        },
        "subscription_start_month": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "定期決済開始月"
        },
        "subscription_start_date": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "定期決済開始日"
        }
      }
    },
    "not_signer": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "担当者名"
        },
        "organize_name": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "所属先"
        },
        "email": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "Eメール"
        },
        "comment": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "コメント"
        },
        "language": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "メール言語",
          "enum": [
            "ja",
            "en"
          ],
          "x-ms-enum-values": [
            {
              "displayName": "日本語",
              "value": "ja"
            },
            {
              "displayName": "英語",
              "value": "en"
            }
          ]
        }
      }
    },
    "inset_item": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "差込項目名"
        },
        "value": {
          "type": "string",
          "x-ms-visibility": "important",
          "x-ms-summary": "差込入力値"
        }
      }
    },
    "SendEnvelopeResponse": {
      "type": "object",
      "properties": {
        "envelope_xid": {
          "description": "封筒のトランザクションID",
          "type": "string",
          "x-ms-summary": "封筒トランザクションID",
          "x-ms-visibility": "important"
        },
        "envelope_status": {
          "description": "The status of the envelope.",
          "type": "string",
          "x-ms-summary": "封筒ステータス",
          "x-ms-visibility": "important"
        },
        "document_list": {
          "type": "array",
          "x-ms-summary": "文書一覧",
          "items": {
            "$ref": "#/definitions/document"
          },
          "x-ms-visibility": "important"
        },
        "signer_list": {
          "type": "array",
          "x-ms-summary": "署名者一覧",
          "items": {
            "$ref": "#/definitions/resSigner"
          },
          "x-ms-visibility": "important"
        }
      }
    },
    "document": {
      "type": "object",
      "properties": {
        "document_name": {
          "type": "string",
          "x-ms-summary": "文書名",
          "x-ms-visibility": "important"
        },
        "control_number": {
          "type": "string",
          "x-ms-summary": "文書ID",
          "x-ms-visibility": "important"
        }
      }
    },
    "resSigner": {
      "type": "object",
      "properties": {
        "order_no": {
          "type": "string",
          "x-ms-summary": "署名順",
          "x-ms-visibility": "important"
        },
        "name": {
          "type": "string",
          "x-ms-summary": "担当者名",
          "x-ms-visibility": "important"
        },
        "organize_name": {
          "type": "string",
          "x-ms-summary": "所属先",
          "x-ms-visibility": "important"
        },
        "email": {
          "type": "string",
          "x-ms-summary": "Eメール",
          "x-ms-visibility": "important"
        },
        "phone_number": {
          "type": "string",
          "x-ms-summary": "電話番号",
          "x-ms-visibility": "important"
        },
        "envelope_signer_id": {
          "type": "string",
          "x-ms-summary": "封筒署名者ID",
          "x-ms-visibility": "important"
        },
        "envelope_sign_token": {
          "type": "string",
          "x-ms-summary": "封筒署名トークン",
          "x-ms-visibility": "important"
        },
        "sign_status": {
          "type": "string",
          "x-ms-summary": "署名ステータス",
          "x-ms-visibility": "important"
        }
      }
    }
  }
}